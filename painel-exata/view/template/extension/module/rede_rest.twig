{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-module" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a>
      </div>
      <h1>{{ heading_title }}</h1> <span class="badge">{{ version }}</span>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if requisitos %}
    <div class="alert alert-warning">
      <h4><b>{{ text_requisitos }}</b></h4>
      {% for requisito in requisito %}
      <p><i class="fa fa-exclamation-triangle"></i> {{ requisito }}</p>
      {% endfor %}
    </div>
    {% endif %}
    {% if error_warning %}
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}</div>
    {% endif %}
    {% if success %}
    <div class="alert alert-success"><i class="fa fa-check-circle"></i> {{ success }}</div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-module" class="form-horizontal">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-geral" data-toggle="tab">{{ tab_geral }}</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-geral">
              <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ info_geral }}</div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><span class="text-danger">*</span> <strong>{{ entry_chave }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_chave }}</span>
                </div>
                <div class="col-sm-6">
                  {% for store in stores_data %}
                  {% set id = store.store_id %}
                  <h5><strong>{{ store.name }}</strong></h5>
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-key"></i></span>
                    <input type="text" name="chave[{{ id }}]" value=" {{ store.store_id in chave|keys ? chave[id] }}" placeholder="" class="form-control" />
                  </div>
                  {% endfor %}
                  {% if error_chave %}
                  <div class="text-danger">{{ error_chave }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><span class="text-danger">*</span> <strong>{{ entry_filiacao }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_filiacao }}</span>
                </div>
                <div class="col-sm-4">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-plug"></i></span>
                    <input type="text" name="filiacao" value="{{ filiacao }}" placeholder="" class="form-control" maxlength="100" />
                  </div>
                  {% if error_filiacao %}
                  <div class="text-danger">{{ error_filiacao }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><span class="text-danger">*</span> <strong>{{ entry_token }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_token }}</span>
                </div>
                <div class="col-sm-4">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-plug"></i></span>
                    <input type="text" name="token" value="{{ token }}" placeholder="" class="form-control" maxlength="100" />
                  </div>
                  {% if error_token %}
                  <div class="text-danger">{{ error_token }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><strong>{{ entry_sandbox }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_sandbox }}</span>
                </div>
                <div class="col-sm-2">
                  <select name="sandbox" class="form-control">
                    <option value="1" {{ sandbox == '1' ? 'selected="selected"' : '' }}>{{ text_yes }}</option>
                    <option value="0" {{ sandbox == '0' ? 'selected="selected"' : '' }}>{{ text_no }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><strong>{{ entry_debug }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_debug }}</span>
                </div>
                <div class="col-sm-2">
                  <select name="debug" class="form-control">
                    <option value="1" {{ debug == '1' ? 'selected="selected"' : '' }}>{{ text_yes }}</option>
                    <option value="0" {{ debug == '0' ? 'selected="selected"' : '' }}>{{ text_no }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><span class="text-danger">*</span> <strong>{{ entry_url_key }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_url_key }}</span>
                </div>
                <div class="col-sm-4">
                  <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-key"></i></span>
                    <input type="text" name="url_key" value="{{ url_key }}" placeholder="" class="form-control" maxlength="40" />
                  </div>
                  {% if error_url_key %}
                  <div class="text-danger">{{ error_url_key }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><strong>{{ entry_url_notificacao }}</strong></h5>
                  <span class="help"><i class="fa fa-info-circle"></i> {{ help_url_notificacao }}</span>
                </div>
                <div class="col-sm-9">
                  <div class="alert alert-info">
                    <label>{{ text_url_notificacao }}</label>
                    <div class="input-group">
                      <span class="input-group-addon"><i class="fa fa-link"></i></span>
                      <input type="text" id="url_notificacao" value='{{ url_notificacao }}' class="form-control" readonly />
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-3">
                  <h5><strong>{{ entry_status }}</strong></h5>
                </div>
                <div class="col-sm-2">
                  <select name="status" class="form-control">
                    <option value="1" {{ status == '1' ? 'selected="selected"' : '' }}>{{ text_yes }}</option>
                    <option value="0" {{ status == '0' ? 'selected="selected"' : '' }}>{{ text_no }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    const inputUrlKey = $('input[name=url_key][type=text]');
    const inputUrlNotificacao = $('#url_notificacao');

    inputUrlKey.on('keyup change', function() {
      const value = $(this).val().replace(/[^a-z0-9]/g,'');

      $(this).val(value);

      inputUrlNotificacao.val('{{ url_notificacao }}' + value);
    });

    inputUrlNotificacao.click(function() {
      $(this).select();
    });

    inputUrlKey.trigger('change');
  </script>
</div>
{{ footer }}